---

copyright:
  years: 2017
lastupdated: "2017-11-07"

---

{:new_window: target="_blank"}
{:shortdesc: .shortdesc}


# User profiles
{: #user-profile}

A user profile is an entity that is stored and maintained by {{site.data.keyword.appid_full}}. The profile contains a user's attributes and identity and can be anonymous or linked to an identity managed by an identity provider.
{:shortdesc}

{{site.data.keyword.appid_short_notm}} provides an API for logging in, either anonymously or by authenticating with an OpenId Connect (OIDC) [identity providers](/docs/services/appid/identity-providers.html#setting-up-idp). The user profile attribute API endpoint is a resource that is protected by the access token that is generated by {{site.data.keyword.appid_short_notm}} during the login and authorization process.


## Storing, reading, and deleting user attributes
{: #storing-data}

{{site.data.keyword.appid_short_notm}} provides a <a href="https://appid-profiles.ng.bluemix.net/swagger-ui/index.html#/Attributes" target="_blank">REST API <img src="../../icons/launch-glyph.svg" alt="External link icon"></a> for performing create, retrieve, update, and delete operations on user's attributes. The service also provides an SDK for <a href="https://github.com/ibm-cloud-security/appid-clientsdk-android" target="_blank">Android <img src="../../icons/launch-glyph.svg" alt="External link icon"></a> and <a href="https://github.com/ibm-cloud-security/appid-clientsdk-swift" target="_blank">Swift <img src="../../icons/launch-glyph.svg" alt="External link icon"></a> mobile clients.


## OAuth identity
{: #oauth}

When the service calls the OAuth login API, {{site.data.keyword.appid_short_notm}} uses OAuth 2.0 and OIDC protocols to authorize and authenticate the caller with a selected identity provider. After authentication, the identity is associated with an {{site.data.keyword.appid_short_notm}} user record. {{site.data.keyword.appid_short_notm}} returns an access token that can be used to access user's attributes, and an identity token that is holding the identity information provided by the identity provider. The same user record and its attributes can be accessed again from any client that authenticates with this same identity.


## Anonymous user
{: #anonymous}

When you log in anonymously, {{site.data.keyword.appid_short_notm}} creates an ad hoc user record that is marked as anonymous. {{site.data.keyword.appid_short_notm}} returns anonymous access and identity tokens to the caller. By using the anonymous access token, the user application can create, read, update, and delete attributes, which are stored in the user record. As an example, a developer can create an application in which a user can immediately start adding items to a shopping cart without having to log in.


## Identified user
{: #identified}

An anonymous user with an identity that is provided by an identity provider can become an identified user. The flow for moving from an anonymous user to an identified user is outlined in the following steps:

* The developer passes the anonymous access token to the login API.
* {{site.data.keyword.appid_short_notm}} authenticates the caller with the identity provider.
* {{site.data.keyword.appid_short_notm}} finds the anonymous user record that is defined by the access token and assigns the identity to it.

    **Note**: The identity can be assigned to the anonymous record only if the same identity was not already assigned to another user. If the identity is already associated with another {{site.data.keyword.appid_short_notm}} user, the access and identity tokens contain information of that user's record and provide access to its attributes. The previous anonymous user and its attributes are not accessible through the new access token. Until the token expires, the information can still be accessed through the anonymous access token. The developer can choose how they want to merge the anonymous attributes of the anonymous user and the known user.

* The new access and identity tokens that are received from {{site.data.keyword.appid_short_notm}} point to the known user and the identity token contains the public information that is received from the identity provider.
* The anonymous tokens become invalid for the user.

Attributes that are contained by this user while it was anonymous are accessible with the new access token. New tokens can be added, changed, or deleted. Going forward, the user and their attributes are resolved and accessible when they log in with the same identity from any client.


## Data separation and encryption
{: #data}

{{site.data.keyword.appid_short_notm}} stores and encrypts user profile attributes. As a multi-tenant service, every tenant has a designated encryption key and user data in each tenant is encrypted with only that tenant's key.

{{site.data.keyword.appid_short_notm}} ensures that private information is encrypted before it is stored.
